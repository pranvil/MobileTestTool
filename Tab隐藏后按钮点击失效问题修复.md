# Tabéšè—åæŒ‰é’®ç‚¹å‡»å¤±æ•ˆé—®é¢˜ä¿®å¤

## é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆï¼šéšè—å‡ ä¸ªTabä¹‹åï¼Œå‰©ä½™Tabä¸Šçš„æ‰€æœ‰æŒ‰é’®ç‚¹å‡»éƒ½ä¸èµ·ä½œç”¨äº†ï¼Œéœ€è¦é‡æ–°å¯åŠ¨ç¨‹åºæ‰èƒ½æ­£å¸¸ã€‚

è¿™æ˜¯ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå½±å“äº†Tabç®¡ç†åŠŸèƒ½çš„æ­£å¸¸ä½¿ç”¨ã€‚

## é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 
åœ¨`reload_tabs`æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é‡æ–°åˆ›å»ºäº†Tabå®ä¾‹ï¼Œä½†æ˜¯æ²¡æœ‰é‡æ–°è¿æ¥ä¿¡å·æ§½ã€‚è¿™å¯¼è‡´ï¼š

1. **ä¿¡å·è¿æ¥ä¸¢å¤±**: Tabé‡æ–°åˆ›å»ºåï¼ŒåŸæœ‰çš„ä¿¡å·è¿æ¥è¢«æ–­å¼€
2. **æŒ‰é’®å¤±æ•ˆ**: æŒ‰é’®ç‚¹å‡»äº‹ä»¶æ— æ³•ä¼ é€’åˆ°ä¸»çª—å£çš„å¤„ç†æ–¹æ³•
3. **åŠŸèƒ½ä¸­æ–­**: æ‰€æœ‰Tabå†…çš„åŠŸèƒ½æŒ‰é’®éƒ½æ— æ³•æ­£å¸¸å·¥ä½œ

### æŠ€æœ¯ç»†èŠ‚
```python
# é—®é¢˜ä»£ç 
def reload_tabs(self):
    # æ¸…é™¤æ‰€æœ‰tab
    while self.tab_widget.count() > 0:
        self.tab_widget.removeTab(0)
    
    # é‡æ–°è®¾ç½®tab
    self.setup_tabs()  # è¿™é‡Œé‡æ–°åˆ›å»ºäº†Tabå®ä¾‹
    
    # ä½†æ˜¯æ²¡æœ‰é‡æ–°è¿æ¥ä¿¡å·æ§½ï¼
    # å¯¼è‡´æŒ‰é’®ç‚¹å‡»å¤±æ•ˆ
```

## è§£å†³æ–¹æ¡ˆ

### ä¿®å¤ç­–ç•¥
åœ¨Tabé‡æ–°åŠ è½½åï¼Œé‡æ–°è¿æ¥æ‰€æœ‰Tabçš„ä¿¡å·æ§½ã€‚

### å®ç°æ–¹æ¡ˆ

#### 1. ä¿®æ”¹`reload_tabs`æ–¹æ³•
```python
def reload_tabs(self):
    """é‡æ–°åŠ è½½Tab"""
    try:
        # ä¿å­˜å½“å‰é€‰ä¸­çš„tab
        current_index = self.tab_widget.currentIndex()
        current_widget = self.tab_widget.currentWidget() if current_index >= 0 else None
        
        # æ¸…é™¤æ‰€æœ‰tab
        while self.tab_widget.count() > 0:
            self.tab_widget.removeTab(0)
        
        # é‡æ–°è®¾ç½®tab
        self.setup_tabs()
        
        # é‡æ–°è¿æ¥Tabä¿¡å·æ§½
        self._reconnect_tab_signals()  # æ–°å¢ï¼šé‡æ–°è¿æ¥ä¿¡å·
        
        # å°è¯•æ¢å¤ä¹‹å‰é€‰ä¸­çš„tab
        if current_widget:
            for i in range(self.tab_widget.count()):
                if self.tab_widget.widget(i) == current_widget:
                    self.tab_widget.setCurrentIndex(i)
                    break
        
        logger.info(self.tr("Tabé‡æ–°åŠ è½½å®Œæˆ"))
        
    except Exception as e:
        logger.exception(f"{self.tr('Tabé‡æ–°åŠ è½½å¤±è´¥:')} {e}")
```

#### 2. æ–°å¢`_reconnect_tab_signals`æ–¹æ³•
```python
def _reconnect_tab_signals(self):
    """é‡æ–°è¿æ¥Tabä¿¡å·æ§½"""
    try:
        # è¿æ¥ Logæ§åˆ¶ Tab ä¿¡å·
        if hasattr(self, 'log_control_tab'):
            self.log_control_tab.mtklog_start.connect(self._on_mtklog_start)
            self.log_control_tab.mtklog_stop_export.connect(self._on_mtklog_stop_export)
            # ... å…¶ä»–ä¿¡å·è¿æ¥
        
        # è¿æ¥ Logè¿‡æ»¤ Tab ä¿¡å·
        if hasattr(self, 'log_filter_tab'):
            self.log_filter_tab.start_filtering.connect(self._on_start_filtering)
            self.log_filter_tab.stop_filtering.connect(self._on_stop_filtering)
            # ... å…¶ä»–ä¿¡å·è¿æ¥
        
        # è¿æ¥å…¶ä»–æ‰€æœ‰Tabçš„ä¿¡å·...
        
        logger.debug(self.tr("Tabä¿¡å·æ§½é‡æ–°è¿æ¥å®Œæˆ"))
        
    except Exception as e:
        logger.exception(f"{self.tr('é‡æ–°è¿æ¥Tabä¿¡å·æ§½å¤±è´¥:')} {e}")
```

## ä¿®å¤æ•ˆæœ

### âœ… é—®é¢˜è§£å†³
1. **æŒ‰é’®åŠŸèƒ½æ¢å¤**: Tabéšè—åï¼Œå‰©ä½™Tabçš„æŒ‰é’®ç‚¹å‡»åŠŸèƒ½æ­£å¸¸
2. **ä¿¡å·è¿æ¥æ­£å¸¸**: æ‰€æœ‰Tabçš„ä¿¡å·æ§½æ­£ç¡®é‡æ–°è¿æ¥
3. **åŠŸèƒ½å®Œæ•´**: Tabç®¡ç†åŠŸèƒ½å®Œå…¨æ­£å¸¸ï¼Œæ— éœ€é‡å¯ç¨‹åº
4. **ç”¨æˆ·ä½“éªŒæ”¹å–„**: å¯ä»¥æ­£å¸¸ä½¿ç”¨Tabéšè—åŠŸèƒ½

### ğŸ”§ æŠ€æœ¯æ”¹è¿›
1. **ä¿¡å·ç®¡ç†**: å®Œå–„äº†Tabé‡æ–°åŠ è½½æ—¶çš„ä¿¡å·è¿æ¥ç®¡ç†
2. **é”™è¯¯å¤„ç†**: æ·»åŠ äº†ä¿¡å·é‡è¿çš„é”™è¯¯å¤„ç†æœºåˆ¶
3. **ä»£ç å¥å£®æ€§**: å¢å¼ºäº†Tabç®¡ç†åŠŸèƒ½çš„ç¨³å®šæ€§
4. **è°ƒè¯•æ”¯æŒ**: æ·»åŠ äº†è¯¦ç»†çš„æ—¥å¿—è®°å½•

## æµ‹è¯•éªŒè¯

### æµ‹è¯•æ­¥éª¤
1. å¯åŠ¨ç¨‹åº
2. è¿›å…¥"å…¶ä»–"Tab â†’ "ğŸ“‹ Tabç®¡ç†"
3. éšè—å‡ ä¸ªTabï¼ˆå¦‚"TMO CC"ã€"24å°æ—¶èƒŒæ™¯æ•°æ®"ï¼‰
4. ç¡®è®¤ä¿å­˜
5. æµ‹è¯•å‰©ä½™Tabä¸­çš„æŒ‰é’®åŠŸèƒ½

### é¢„æœŸç»“æœ
- âœ… éšè—çš„Tabä¸å†æ˜¾ç¤º
- âœ… å‰©ä½™Tabçš„æŒ‰é’®ç‚¹å‡»åŠŸèƒ½æ­£å¸¸
- âœ… æ‰€æœ‰åŠŸèƒ½æŒ‰é’®éƒ½èƒ½æ­£å¸¸å·¥ä½œ
- âœ… æ— éœ€é‡å¯ç¨‹åº

## æŠ€æœ¯ç»†èŠ‚

### ä¿¡å·è¿æ¥è¦†ç›–
ä¿®å¤æ¶µç›–äº†æ‰€æœ‰Tabçš„ä¿¡å·è¿æ¥ï¼š

1. **Logæ§åˆ¶ Tab**: MTKLOGã€ADB Logã€Telephonyç­‰ä¿¡å·
2. **Logè¿‡æ»¤ Tab**: è¿‡æ»¤æ§åˆ¶ã€å…³é”®å­—ç®¡ç†ç­‰ä¿¡å·
3. **ç½‘ç»œä¿¡æ¯ Tab**: ç½‘ç»œä¿¡æ¯è·å–ã€Pingæµ‹è¯•ç­‰ä¿¡å·
4. **TMO CC Tab**: CCæ–‡ä»¶æ“ä½œã€è¿‡æ»¤æ“ä½œç­‰ä¿¡å·
5. **TMO Echolocate Tab**: Echolocateæ“ä½œã€è¿‡æ»¤æ“ä½œç­‰ä¿¡å·
6. **24å°æ—¶èƒŒæ™¯æ•°æ® Tab**: é…ç½®ã€åˆ†æç­‰ä¿¡å·
7. **APPæ“ä½œ Tab**: æŸ¥è¯¢ã€APKã€è¿›ç¨‹ã€çŠ¶æ€ç­‰ä¿¡å·
8. **å…¶ä»– Tab**: è®¾å¤‡ä¿¡æ¯ã€é…ç½®ã€ç®¡ç†ç­‰ä¿¡å·

### å®‰å…¨æ£€æŸ¥
- ä½¿ç”¨`hasattr`æ£€æŸ¥Tabå®ä¾‹æ˜¯å¦å­˜åœ¨
- æ·»åŠ å¼‚å¸¸å¤„ç†ï¼Œé˜²æ­¢ä¿¡å·è¿æ¥å¤±è´¥
- è®°å½•è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—

## æ–‡ä»¶å˜æ›´

### ä¿®æ”¹æ–‡ä»¶
1. **ui/main_window.py**
   - ä¿®æ”¹`reload_tabs`æ–¹æ³•ï¼Œæ·»åŠ ä¿¡å·é‡è¿
   - æ–°å¢`_reconnect_tab_signals`æ–¹æ³•
   - å®Œå–„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

## æ€»ç»“

é€šè¿‡ä¿®å¤Tabé‡æ–°åŠ è½½æ—¶çš„ä¿¡å·è¿æ¥é—®é¢˜ï¼ŒæˆåŠŸè§£å†³äº†Tabéšè—åæŒ‰é’®ç‚¹å‡»å¤±æ•ˆçš„é—®é¢˜ã€‚ç°åœ¨Tabç®¡ç†åŠŸèƒ½å®Œå…¨æ­£å¸¸ï¼Œç”¨æˆ·å¯ä»¥ï¼š

- âœ… æ­£å¸¸éšè—/æ˜¾ç¤ºTab
- âœ… ä½¿ç”¨å‰©ä½™Tabçš„æ‰€æœ‰åŠŸèƒ½
- âœ… äº«å—æµç•…çš„Tabç®¡ç†ä½“éªŒ
- âœ… æ— éœ€é‡å¯ç¨‹åºå³å¯æ­£å¸¸ä½¿ç”¨

é—®é¢˜å·²å®Œå…¨è§£å†³ï¼ğŸ‰
