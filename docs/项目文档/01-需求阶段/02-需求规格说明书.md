# MobileTestTool 需求规格说明书 (SRS)

## 文档信息

| 项目 | 内容 |
|------|------|
| **文档名称** | 需求规格说明书 (Software Requirements Specification) |
| **项目名称** | 手机测试辅助工具 (MobileTestTool) |
| **文档版本** | 1.0 |
| **创建日期** | 2025-11-03 |
| **最后更新** | 2025-11-03 |
| **文档状态** | 草案 |
| **编写人员** | [姓名] |
| **审核人员** | [姓名] |

---

## 1. 引言

### 1.1 编写目的

本文档旨在详细描述MobileTestTool的功能需求、性能需求、接口需求等，为系统设计、开发、测试提供依据。

### 1.2 项目背景

MobileTestTool是一款用于Android设备测试和开发的辅助工具，整合了设备管理、日志分析、网络监控、应用操作等功能，提供统一的图形化界面，简化测试工作流程。

### 1.3 定义和缩略语

| 术语 | 定义 |
|------|------|
| ADB | Android Debug Bridge，Android调试桥 |
| MTKLOG | MediaTek设备日志系统 |
| GUI | Graphical User Interface，图形用户界面 |
| CLI | Command Line Interface，命令行界面 |
| MVP | Minimum Viable Product，最小可行产品 |
| APDU | Application Protocol Data Unit，应用协议数据单元 |
| SIM | Subscriber Identity Module，用户身份识别模块 |

### 1.4 参考资料

- Android ADB官方文档
- PyQt5官方文档
- Python 3.6+文档

---

## 2. 系统概述

### 2.1 产品描述

MobileTestTool是一款基于Python和PyQt5开发的桌面应用程序，运行在Windows平台上，通过ADB与Android设备通信，提供设备管理、日志分析、网络监控等功能。

### 2.2 产品功能

主要功能模块包括：
1. 设备管理：设备连接、设备信息查询、多设备支持
2. 日志管理：实时日志过滤、MTKLOG管理、ADB Log管理
3. 网络测试：网络信息监控、TCPDump抓包
4. 设备操作：应用管理、截图录制
5. 自定义功能：自定义按钮、Tab管理
6. SIM卡工具：APDU解析、SIM卡读写

### 2.3 用户特点

**目标用户**：
- Android测试工程师
- Android开发工程师
- 设备测试人员

**用户技能水平**：
- 熟悉Android开发环境
- 了解ADB命令基本用法
- 熟悉Windows操作系统

### 2.4 运行环境

**操作系统**：Windows 10/11 (64位)

**软件依赖**：
- Python 3.6+（仅源码运行需要）
- Android SDK Platform-Tools（ADB）
- PyQt5（已包含在打包版本中）

**硬件要求**：
- CPU：双核及以上
- 内存：4GB RAM及以上
- 磁盘：1GB可用空间

---

## 3. 功能需求

### 3.1 设备管理功能

#### FR-001: 设备连接

**需求ID**: FR-001  
**优先级**: P0  
**描述**: 系统应能够检测并连接通过USB连接的Android设备

**详细需求**：
1. 自动扫描已连接的Android设备
2. 显示设备列表（设备ID、型号、状态）
3. 支持手动刷新设备列表
4. 支持选择当前操作的设备
5. 显示设备连接状态（已连接/离线/未授权）

**输入**：
- USB连接事件
- 用户点击"刷新设备"按钮

**输出**：
- 设备列表
- 设备连接状态提示

**验收标准**：
- 能够检测到已启用USB调试的设备
- 能够识别设备离线状态
- 能够处理设备未授权的情况

#### FR-002: 设备信息查询

**需求ID**: FR-002  
**优先级**: P0  
**描述**: 系统应能够查询并显示Android设备的详细信息

**详细需求**：
1. 一键获取设备基本信息
   - 设备型号
   - Android版本
   - API级别
   - 设备序列号
2. 获取设备标识信息
   - IMEI
   - ICCID
   - IMSI
3. 获取硬件信息
   - 屏幕分辨率
   - CPU信息
   - 存储信息

**输入**：
- 用户点击"获取设备信息"按钮
- 当前选择的设备ID

**输出**：
- 设备信息文本（显示在日志区域）

**验收标准**：
- 能够成功获取所有支持的信息
- 信息显示格式清晰易读
- 查询时间 < 5秒

---

### 3.2 日志管理功能

#### FR-101: 实时日志过滤

**需求ID**: FR-101  
**优先级**: P0  
**描述**: 系统应能够实时过滤ADB logcat日志

**详细需求**：
1. 支持关键字过滤
2. 支持正则表达式过滤
3. 支持大小写敏感/不敏感选项
4. 支持排除模式（显示不匹配的行）
5. 实时显示过滤结果
6. 支持保存过滤后的日志到文件
7. 支持清空日志显示区域

**输入**：
- 关键字或正则表达式
- 过滤选项（正则/大小写/排除模式）
- 用户点击"开始过滤"按钮

**输出**：
- 过滤后的日志行（实时显示）
- 保存的日志文件

**验收标准**：
- 过滤延迟 < 100ms
- 支持复杂的正则表达式
- 日志行数无限制（或超过限制时自动清理旧日志）
- 能够正确处理特殊字符

#### FR-102: MTKLOG管理

**需求ID**: FR-102  
**优先级**: P1  
**描述**: 系统应能够管理MediaTek设备的MTKLOG

**详细需求**：
1. 开启MTKLOG
   - 支持SD模式和USB模式
   - 自动执行完整的初始化序列
   - 显示MTKLOG运行状态
2. 停止并导出MTKLOG
   - 停止日志收集
   - 自动导出到PC
   - 显示导出进度
3. 删除MTKLOG
   - 从设备删除日志文件

**输入**：
- 用户选择存储模式
- 用户点击"开启"/"停止&导出"按钮

**输出**：
- MTKLOG状态提示
- 导出到PC的日志文件（保存在`C:\log\日期\log_xxx\`）

**验收标准**：
- 能够成功开启MTKLOG
- 导出功能正常
- 支持大文件导出（>1GB）

---

### 3.3 网络测试功能

#### FR-201: 网络信息监控

**需求ID**: FR-201  
**优先级**: P1  
**描述**: 系统应能够实时监控Android设备的网络信息

**详细需求**：
1. 监控蜂窝网络信息
   - 运营商名称
   - 信号强度（RSRP、RSSI）
   - 网络类型（LTE、5G等）
   - 频段信息
   - 小区信息（PCI、TAC等）
2. 监控WiFi信息
   - SSID
   - MAC地址
   - IP地址
   - 连接速度
3. 实时更新（每秒或按需）

**输入**：
- 用户点击"开始获取网络信息"按钮

**输出**：
- 实时显示的网络信息（GUI界面）

**验收标准**：
- 信息更新及时准确
- 支持多种网络制式
- 界面显示清晰

#### FR-202: TCPDump抓包

**需求ID**: FR-202  
**优先级**: P1  
**描述**: 系统应能够启动TCPDump进行网络抓包

**详细需求**：
1. 启动TCPDump抓包
2. 停止抓包并导出文件
3. 显示抓包状态

**输入**：
- 用户点击"开始抓包"/"停止抓包"按钮

**输出**：
- 抓包文件（.pcap格式，保存在`C:\log\日期\tcpdump\`）

**验收标准**：
- 能够成功启动和停止抓包
- 抓包文件格式正确
- 支持大流量抓包

---

### 3.4 设备操作功能

#### FR-301: 应用管理

**需求ID**: FR-301  
**优先级**: P1  
**描述**: 系统应能够管理Android设备上的应用

**详细需求**：
1. 安装APK
   - 选择APK文件
   - 执行安装
   - 显示安装进度和结果
2. 卸载应用
   - 输入包名
   - 执行卸载
   - 确认操作
3. 查询应用信息
   - 输入包名
   - 显示应用详细信息
4. 清除应用数据
   - 输入包名
   - 清除应用缓存和数据

**输入**：
- APK文件路径（安装）
- 应用包名（卸载/查询/清除）

**输出**：
- 操作结果提示
- 应用信息（查询时）

**验收标准**：
- 安装/卸载功能正常
- 能够正确处理安装失败的情况
- 应用信息查询准确

#### FR-302: 截图和录制

**需求ID**: FR-302  
**优先级**: P1  
**描述**: 系统应能够对Android设备进行截图和屏幕录制

**详细需求**：
1. 截图功能
   - 一键截图
   - 自动保存到指定目录
   - 文件命名：`screenshot_YYYYMMDD_HHMMSS.png`
2. 录制功能
   - 开始录制
   - 停止录制
   - 自动保存视频文件
   - 文件命名：`screenrecord_YYYYMMDD_HHMMSS.mp4`

**输入**：
- 用户点击"截图"/"开始录制"/"停止录制"按钮

**输出**：
- 截图文件（保存在`C:\log\日期\screenshot\`）
- 视频文件（保存在`C:\log\日期\video\`）

**验收标准**：
- 截图质量清晰
- 录制功能正常（Android 4.4+）
- 文件保存路径正确

---

### 3.5 自定义功能

#### FR-401: 自定义按钮

**需求ID**: FR-401  
**优先级**: P2  
**描述**: 系统应允许用户创建自定义功能按钮

**详细需求**：
1. 支持5种按钮类型
   - ADB命令
   - Python脚本
   - 打开文件
   - 运行程序
   - 系统命令
2. 按钮配置
   - 按钮名称
   - 按钮类型
   - 命令/路径
   - 所属Tab和Card
   - 描述信息
3. 按钮管理
   - 添加按钮
   - 编辑按钮
   - 删除按钮
   - 导入/导出配置
4. 动态加载（无需重启）

**输入**：
- 用户通过GUI配置按钮信息

**输出**：
- 自定义按钮显示在指定位置
- 执行结果显示在日志区域

**验收标准**：
- 所有按钮类型都能正常工作
- 配置能够保存和加载
- 按钮执行结果正确显示

#### FR-402: Tab管理

**需求ID**: FR-402  
**优先级**: P2  
**描述**: 系统应允许用户管理Tab的显示和顺序

**详细需求**：
1. Tab拖拽排序
2. Tab显示/隐藏控制
3. 创建自定义Tab
4. 创建自定义Card
5. 配置保存和恢复

**输入**：
- 用户拖拽Tab
- 用户在Tab管理对话框中配置

**输出**：
- Tab顺序和显示状态更新

**验收标准**：
- 拖拽排序流畅
- 配置能够正确保存
- 自定义Tab和Card正常工作

---

### 3.6 SIM卡工具

#### FR-501: SIM APDU解析器

**需求ID**: FR-501  
**优先级**: P2  
**描述**: 系统应提供SIM卡APDU消息解析功能

**详细需求**：
1. 支持多种数据格式
   - MTK原始日志
   - MTK表格格式
   - 通用APDU文本格式
2. 自动识别和分类
   - eSIM消息
   - CAT命令
   - 普通SIM卡消息
3. 详细的TLV结构解析
4. 图形化界面展示
5. 搜索和过滤功能

**验收标准**：
- 能够正确解析各种格式
- 解析结果准确
- 界面友好易用

#### FR-502: SIM卡读写工具

**需求ID**: FR-502  
**优先级**: P2  
**描述**: 系统应提供SIM卡数据读写功能

**详细需求**：
1. GUI模式：图形化操作界面
2. CLI模式：命令行批量操作
3. 读取EF文件数据
4. 写入EF文件数据
5. PIN码验证
6. 批量操作支持

**验收标准**：
- 读写功能正常
- 支持多种EF文件类型
- CLI模式便于自动化

---

## 4. 非功能需求

### 4.1 性能需求

| 指标 | 要求 | 说明 |
|------|------|------|
| 启动时间 | < 5秒 | 从启动到主界面显示 |
| 日志过滤延迟 | < 100ms | 从日志产生到显示在界面上 |
| 内存占用 | < 500MB | 正常运行时的内存占用 |
| CPU占用 | < 20% | 正常运行时的CPU占用 |
| 响应时间 | < 1秒 | 用户操作到界面反馈 |

### 4.2 可用性需求

1. **界面友好**：界面简洁直观，符合Windows应用习惯
2. **操作简单**：常用功能一键完成，减少点击次数
3. **提示清晰**：操作结果有明确提示，错误信息易懂
4. **帮助完善**：提供使用说明书和帮助文档

### 4.3 可靠性需求

1. **异常处理**：完善的异常处理机制，不会因异常崩溃
2. **数据保护**：配置文件自动备份，避免数据丢失
3. **错误恢复**：设备断开后能够自动重连
4. **日志记录**：详细的日志记录，便于问题排查

### 4.4 可维护性需求

1. **代码规范**：遵循PEP 8规范，代码清晰易读
2. **模块化设计**：功能模块独立，便于维护和扩展
3. **文档完善**：代码注释、设计文档齐全
4. **版本控制**：使用Git进行版本管理

### 4.5 可扩展性需求

1. **插件机制**：支持自定义按钮和Tab扩展
2. **配置灵活**：支持配置文件自定义
3. **接口开放**：预留扩展接口

### 4.6 兼容性需求

1. **操作系统**：Windows 10/11 (64位)
2. **Python版本**：Python 3.6+
3. **Android版本**：Android 4.4+（部分功能）
4. **ADB版本**：ADB 1.0.32+

### 4.7 安全需求

1. **输入验证**：所有用户输入进行验证，防止注入攻击
2. **文件权限**：文件操作检查权限
3. **数据加密**：敏感配置信息加密存储（可选）

---

## 5. 接口需求

### 5.1 用户接口

- **GUI界面**：基于PyQt5的图形用户界面
- **CLI接口**：命令行接口（SIM卡工具）

### 5.2 硬件接口

- **USB接口**：通过USB连接Android设备
- **串口接口**：SIM卡读写工具使用串口通信

### 5.3 软件接口

- **ADB接口**：通过ADB命令与Android设备通信
- **文件系统接口**：读写配置文件、日志文件
- **操作系统接口**：调用系统命令、打开文件等

### 5.4 通信接口

- **HTTP/HTTPS**：在线更新功能（可选）

---

## 6. 约束条件

### 6.1 技术约束

1. 必须使用Python 3.6+开发
2. 必须使用PyQt5作为GUI框架
3. 必须支持Windows平台
4. 必须能够打包为独立可执行文件

### 6.2 业务约束

1. 仅用于合法的测试和开发目的
2. 遵守相关法律法规
3. 保护用户隐私和数据安全

### 6.3 时间约束

- MVP版本：12周内完成
- 正式版本：20周内完成

---

## 7. 需求优先级

| 优先级 | 说明 | 需求ID |
|--------|------|--------|
| **P0（必须有）** | MVP版本必须包含 | FR-001, FR-002, FR-101 |
| **P1（应该有）** | 主要功能，应在MVP中包含 | FR-102, FR-201, FR-202, FR-301, FR-302 |
| **P2（可以有）** | 高级功能，可在后续版本添加 | FR-401, FR-402, FR-501, FR-502 |

---

## 8. 需求跟踪

| 需求ID | 需求描述 | 设计文档 | 测试用例 | 状态 |
|--------|----------|----------|----------|------|
| FR-001 | 设备连接 | | | 待开始 |
| FR-002 | 设备信息查询 | | | 待开始 |
| FR-101 | 实时日志过滤 | | | 待开始 |
| ... | ... | ... | ... | ... |

---

## 9. 附录

### 9.1 术语表

（见1.3节）

### 9.2 参考文档

- Android ADB官方文档
- PyQt5官方文档
- Python官方文档

### 9.3 变更历史

| 版本 | 日期 | 作者 | 变更说明 |
|------|------|------|----------|
| 1.0 | 2025-11-03 | [姓名] | 初始版本 |

---

**文档状态**：✅ 待评审

