# MobileTestTool 开发环境搭建指南

## 文档信息

| 项目 | 内容 |
|------|------|
| **文档版本** | 1.0 |
| **创建日期** | 2025-11-03 |
| **适用平台** | Windows 10/11 |

---

## 1. 前置要求

### 1.1 操作系统

- Windows 10 (64位) 或更高版本
- Windows 11 (64位)

### 1.2 硬件要求

- CPU：双核及以上
- 内存：8GB RAM（推荐16GB）
- 磁盘：至少10GB可用空间
- USB接口：用于连接Android设备

---

## 2. 安装步骤

### 2.1 安装Python

1. **下载Python**
   - 访问 [Python官网](https://www.python.org/downloads/)
   - 下载 Python 3.8 或更高版本（推荐 3.9 或 3.10）
   - **注意**：选择Windows x86-64安装程序

2. **安装Python**
   - 运行安装程序
   - **重要**：勾选 "Add Python to PATH"
   - 选择 "Install Now" 或 "Customize installation"
   - 如果选择自定义安装，确保勾选 "pip" 和 "tcl/tk"

3. **验证安装**
   ```bash
   python --version
   # 应显示 Python 3.x.x
   
   pip --version
   # 应显示 pip 版本信息
   ```

### 2.2 安装Git（可选但推荐）

1. **下载Git**
   - 访问 [Git官网](https://git-scm.com/download/win)
   - 下载Windows版本

2. **安装Git**
   - 运行安装程序
   - 使用默认选项即可

3. **验证安装**
   ```bash
   git --version
   # 应显示 git 版本信息
   ```

### 2.3 安装Android SDK Platform-Tools (ADB)

1. **下载Platform-Tools**
   - 访问 [Android Developers](https://developer.android.com/studio/releases/platform-tools)
   - 下载Windows版本

2. **解压并配置**
   - 解压到目录，如 `C:\platform-tools\`
   - 添加到系统PATH环境变量：
     - 右键"此电脑" → 属性 → 高级系统设置
     - 环境变量 → 系统变量 → Path → 编辑
     - 添加 `C:\platform-tools\`

3. **验证安装**
   ```bash
   adb version
   # 应显示 Android Debug Bridge version x.x.x
   ```

---

## 3. 项目设置

### 3.1 克隆项目

```bash
# 使用Git克隆（如果使用Git）
git clone <repository-url>
cd MobileTestTool

# 或者下载ZIP文件并解压
```

### 3.2 创建虚拟环境（推荐）

```bash
# 创建虚拟环境
python -m venv venv

# 激活虚拟环境
# Windows PowerShell:
.\venv\Scripts\Activate.ps1

# Windows CMD:
venv\Scripts\activate.bat
```

**注意**：如果PowerShell执行策略限制，运行：
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### 3.3 安装依赖

```bash
# 激活虚拟环境后
pip install -r requirements.txt

# 如果使用PyQt5版本
pip install -r requirements_pyqt.txt
```

### 3.4 验证安装

```bash
# 检查关键依赖
python -c "import PyQt5; print('PyQt5 OK')"
python -c "import serial; print('pyserial OK')"

# 运行程序（如果已实现）
python main.py
```

---

## 4. 开发工具配置

### 4.1 IDE选择

**推荐IDE**：

1. **PyCharm**（推荐）
   - 下载 [PyCharm Community Edition](https://www.jetbrains.com/pycharm/download/)
   - 安装后打开项目
   - 配置Python解释器为虚拟环境中的Python

2. **Visual Studio Code**
   - 下载 [VSCode](https://code.visualstudio.com/)
   - 安装Python扩展
   - 配置Python解释器

3. **其他IDE**
   - 任何支持Python的IDE都可以

### 4.2 PyCharm配置

1. **打开项目**
   - File → Open → 选择项目目录

2. **配置Python解释器**
   - File → Settings → Project → Python Interpreter
   - 选择虚拟环境中的Python解释器

3. **配置代码风格**
   - File → Settings → Editor → Code Style → Python
   - 选择PEP 8风格

4. **配置Git**（如果使用）
   - File → Settings → Version Control → Git
   - 设置Git路径

### 4.3 VSCode配置

1. **安装扩展**
   - Python（Microsoft）
   - Pylance（类型检查）
   - Python Docstring Generator
   - GitLens（Git增强）

2. **配置设置**
   - 创建 `.vscode/settings.json`：
   ```json
   {
       "python.defaultInterpreterPath": "${workspaceFolder}/venv/Scripts/python.exe",
       "python.formatting.provider": "black",
       "python.linting.enabled": true,
       "python.linting.pylintEnabled": true
   }
   ```

---

## 5. 测试设备准备

### 5.1 Android设备设置

1. **启用开发者选项**
   - 设置 → 关于手机
   - 连续点击"版本号"7次

2. **启用USB调试**
   - 设置 → 开发者选项
   - 启用"USB调试"
   - 启用"USB调试（安全设置）"（如果有）

3. **连接设备**
   - 使用USB数据线连接设备到电脑
   - 在设备上允许USB调试授权

### 5.2 验证设备连接

```bash
# 查看连接的设备
adb devices

# 应该显示：
# List of devices attached
# xxxxxxxx    device
```

如果显示"unauthorized"，需要在设备上允许USB调试授权。

---

## 6. 开发工具检查清单

### 6.1 必需工具

- [ ] Python 3.6+ 已安装
- [ ] pip 已安装
- [ ] 虚拟环境已创建
- [ ] 项目依赖已安装
- [ ] ADB工具已安装并配置PATH
- [ ] 开发IDE已安装并配置
- [ ] Android设备已连接并可识别

### 6.2 推荐工具

- [ ] Git已安装（用于版本控制）
- [ ] 代码格式化工具（black、autopep8）
- [ ] 代码检查工具（pylint、flake8）
- [ ] 调试工具（pdb、PyCharm调试器）

---

## 7. 常见问题

### 7.1 Python相关问题

**Q: Python命令未找到？**
- 确保已添加到PATH
- 重启命令行窗口
- Windows可能需要使用`py`命令

**Q: pip安装失败？**
- 使用`python -m pip install`代替`pip install`
- 升级pip：`python -m pip install --upgrade pip`

### 7.2 PyQt5相关问题

**Q: PyQt5安装失败？**
- 确保Python版本 >= 3.6
- 尝试：`pip install PyQt5 --upgrade`
- 检查是否有编译错误，可能需要Visual C++编译器

**Q: PyQt5导入错误？**
- 检查虚拟环境是否激活
- 检查Python解释器是否正确

### 7.3 ADB相关问题

**Q: adb命令未找到？**
- 检查PATH环境变量
- 重启命令行窗口
- 使用完整路径：`C:\platform-tools\adb.exe`

**Q: 设备未识别？**
- 检查USB连接
- 检查设备是否启用USB调试
- 尝试重新连接
- 运行`adb kill-server`然后`adb start-server`

### 7.4 虚拟环境问题

**Q: 虚拟环境激活失败？**
- PowerShell可能需要设置执行策略
- 使用CMD而不是PowerShell
- 手动运行激活脚本

---

## 8. 开发环境验证脚本

创建 `check_env.py`：

```python
#!/usr/bin/env python3
"""开发环境检查脚本"""

import sys
import subprocess

def check_python():
    print(f"Python版本: {sys.version}")
    if sys.version_info < (3, 6):
        print("❌ Python版本过低，需要3.6+")
        return False
    print("✅ Python版本OK")
    return True

def check_module(module_name):
    try:
        __import__(module_name)
        print(f"✅ {module_name} 已安装")
        return True
    except ImportError:
        print(f"❌ {module_name} 未安装")
        return False

def check_adb():
    try:
        result = subprocess.run(['adb', 'version'], 
                              capture_output=True, 
                              text=True, 
                              timeout=5)
        if result.returncode == 0:
            print("✅ ADB已安装")
            print(f"   {result.stdout.strip()}")
            return True
        else:
            print("❌ ADB未正确安装")
            return False
    except FileNotFoundError:
        print("❌ ADB未找到，请检查PATH")
        return False
    except Exception as e:
        print(f"❌ ADB检查失败: {e}")
        return False

def main():
    print("=" * 50)
    print("开发环境检查")
    print("=" * 50)
    
    checks = [
        check_python(),
        check_module('PyQt5'),
        check_module('serial'),
        check_adb()
    ]
    
    print("=" * 50)
    if all(checks):
        print("✅ 所有检查通过！")
        return 0
    else:
        print("❌ 部分检查失败，请修复后重试")
        return 1

if __name__ == '__main__':
    sys.exit(main())
```

运行检查：
```bash
python check_env.py
```

---

## 9. 下一步

环境搭建完成后，可以：

1. 查看项目README了解项目结构
2. 阅读编码规范文档
3. 开始开发功能

---

**文档状态**：✅ 已完成

